services:
  shop:
    build: .
    container_name: shop
    environment:
      # You might need to adjust PHP settings for production
      - PHP_MEMORY_LIMIT=512M
    ports:
      - "80"
      # You generally don't need to expose DB ports publicly in Coolify
      # unless you connect externally.
    volumes:
      # KEEP: Database persistence
      - "db_volume_guide:/var/lib/mysql"

      # KEEP: Media/Files persistence (User generated content)
      - "shop_files:/var/www/html/files"
      - "shop_media:/var/www/html/public/media"
      - "shop_thumbnail:/var/www/html/public/thumbnail"
      - "shop_sitemap:/var/www/html/public/sitemap"
      # REMOVE: Do not mount ./apps or ./theme here. 
      # We handled this in the Dockerfile via COPY.

volumes:
  db_volume_guide:
    driver: local
  # Define the named volumes for files
  shop_files:
  shop_media:
  shop_thumbnail:
  shop_sitemap:
